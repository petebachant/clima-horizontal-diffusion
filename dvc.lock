schema: '2.0'
stages:
  gen-smag-state:
    cmd: calkit slurm batch --name gen-smag-state --environment clima --dep 
      scripts/gen_smag_state.jl --dep config/base.yml --dep config/smag.yml 
      --dep ClimaAtmos.jl/src --dep ClimaAtmos.jl/toml --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml --out 
      results/smag_fixture.jld2 -s --gpus=1 -s --time=30 -- scripts/run.sh 
      ClimaAtmos.jl/.buildkite scripts/gen_smag_state.jl
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 01e1d1b04e003a8a54f22f5da3dc6465.dir
      size: 1317233
      nfiles: 101
    - path: ClimaAtmos.jl/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/smag.yml
      hash: md5
      md5: d953bd59bd767f59488f1b95350864c4
      size: 22
    - path: scripts/gen_smag_state.jl
      hash: md5
      md5: 35245dd10e4970910f68f2b71d3e3ba4
      size: 1449
    - path: scripts/run.sh
      hash: md5
      md5: 55b895adbb65f6511b237e4d2cde9f25
      size: 1014
    outs:
    - path: .calkit/slurm/logs/gen-smag-state.out
      hash: md5
      md5: 6a6f99ad23e8a126665d4adbd03b2572
      size: 10091
    - path: results/smag_fixture.jld2
      hash: md5
      md5: ee30c111977c5e5872148cda070a2480
      size: 1279337013
  nsys-baseline:
    cmd: calkit slurm batch --name nsys-baseline --environment clima --dep 
      config/base.yml --dep config/smag.yml --dep ClimaAtmos.jl/src --dep 
      ClimaAtmos.jl/toml --dep ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml 
      --dep ClimaAtmos.jl/perf/benchmark_step.jl --out 
      results/nsys/baseline.nsys-rep -s --gpus=1 -s --time=60 -- 
      scripts/run-nsys.sh results/nsys/baseline ClimaAtmos.jl/.buildkite 
      config/base.yml config/smag.yml
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 01e1d1b04e003a8a54f22f5da3dc6465.dir
      size: 1317233
      nfiles: 101
    - path: ClimaAtmos.jl/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/smag.yml
      hash: md5
      md5: d953bd59bd767f59488f1b95350864c4
      size: 22
    - path: scripts/run-nsys.sh
      hash: md5
      md5: f83d8ec0a4bd8e2cd5513b64079b7b02
      size: 1546
    outs:
    - path: .calkit/slurm/logs/nsys-baseline.out
      hash: md5
      md5: 6d145551baff589dd34e44bbb06445c9
      size: 14717
    - path: results/nsys/baseline.nsys-rep
      hash: md5
      md5: 03303c2b54bf3d3bbcd4561195593583
      size: 5341436
  nsys-baseline-to-sqlite:
    cmd: ' bash --noprofile --norc -c "nsys export results/nsys/baseline.nsys-rep
      -t sqlite -o results/nsys/baseline.sqlite"'
    deps:
    - path: results/nsys/baseline.nsys-rep
      hash: md5
      md5: 03303c2b54bf3d3bbcd4561195593583
      size: 5341436
    outs:
    - path: results/nsys/baseline.sqlite
      hash: md5
      md5: e0f708c0d8ebdd8f4e1ca91b3708a998
      size: 10686464
  nsys-mod:
    cmd: calkit slurm batch --name nsys-mod --environment clima --dep 
      config/base.yml --dep config/smag.yml --dep ClimaAtmos.jl-mod/src --dep 
      ClimaAtmos.jl-mod/toml --dep 
      ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml --dep 
      ClimaAtmos.jl/perf/benchmark_step.jl --out results/nsys/mod.nsys-rep -s 
      --gpus=1 -s --time=60 -- scripts/run-nsys.sh results/nsys/mod 
      ClimaAtmos.jl-mod/.buildkite config/base.yml config/smag.yml
    deps:
    - path: ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl-mod/src
      hash: md5
      md5: 01e1d1b04e003a8a54f22f5da3dc6465.dir
      size: 1317233
      nfiles: 101
    - path: ClimaAtmos.jl-mod/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/smag.yml
      hash: md5
      md5: d953bd59bd767f59488f1b95350864c4
      size: 22
    - path: scripts/run-nsys.sh
      hash: md5
      md5: f83d8ec0a4bd8e2cd5513b64079b7b02
      size: 1546
    outs:
    - path: .calkit/slurm/logs/nsys-mod.out
      hash: md5
      md5: 51aaf0bb97aea31b4dfca4a5a84018c2
      size: 14257
    - path: results/nsys/mod.nsys-rep
      hash: md5
      md5: 8ba474adcd13725d12ed02f261e4c463
      size: 5341303
  nsys-mod-to-sqlite:
    cmd: ' bash --noprofile --norc -c "nsys export results/nsys/mod.nsys-rep -t sqlite
      -o results/nsys/mod.sqlite"'
    deps:
    - path: results/nsys/mod.nsys-rep
      hash: md5
      md5: 8ba474adcd13725d12ed02f261e4c463
      size: 5341303
    outs:
    - path: results/nsys/mod.sqlite
      hash: md5
      md5: 77c36a2674d311717bde7e3caadfc139
      size: 10678272
  nsys-baseline-const:
    cmd: calkit slurm batch --name nsys-baseline-const --environment clima --dep
      config/base.yml --dep config/const.yml --dep ClimaAtmos.jl/src --dep 
      ClimaAtmos.jl/toml --dep ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml 
      --dep ClimaAtmos.jl/perf/benchmark_step.jl --out 
      results/nsys/baseline-const.nsys-rep -s --gpus=1 -s --time=60 -- 
      scripts/run-nsys.sh results/nsys/baseline-const ClimaAtmos.jl/.buildkite 
      config/base.yml config/const.yml
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 01e1d1b04e003a8a54f22f5da3dc6465.dir
      size: 1317233
      nfiles: 101
    - path: ClimaAtmos.jl/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/const.yml
      hash: md5
      md5: 77bc7b925c754338d9602a945c8888ce
      size: 36
    - path: scripts/run-nsys.sh
      hash: md5
      md5: f83d8ec0a4bd8e2cd5513b64079b7b02
      size: 1546
    outs:
    - path: .calkit/slurm/logs/nsys-baseline-const.out
      hash: md5
      md5: bf7c614f14560f843d2aeaf3a3e11d9f
      size: 13983
    - path: results/nsys/baseline-const.nsys-rep
      hash: md5
      md5: e4792ada9a368bb7b2129838f3b8f657
      size: 5093662
  nsys-baseline-const-to-sqlite:
    cmd: ' bash --noprofile --norc -c "nsys export results/nsys/baseline-const.nsys-rep
      -t sqlite -o results/nsys/baseline-const.sqlite"'
    deps:
    - path: results/nsys/baseline-const.nsys-rep
      hash: md5
      md5: e4792ada9a368bb7b2129838f3b8f657
      size: 5093662
    outs:
    - path: results/nsys/baseline-const.sqlite
      hash: md5
      md5: b01e1233bda857e35241befa9fd26c8e
      size: 10166272
  nsys-baseline-none:
    cmd: calkit slurm batch --name nsys-baseline-none --environment clima --dep 
      config/base.yml --dep ClimaAtmos.jl/src --dep ClimaAtmos.jl/toml --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml --dep 
      ClimaAtmos.jl/perf/benchmark_step.jl --out 
      results/nsys/baseline-none.nsys-rep -s --gpus=1 -s --time=60 -- 
      scripts/run-nsys.sh results/nsys/baseline-none ClimaAtmos.jl/.buildkite 
      config/base.yml
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 01e1d1b04e003a8a54f22f5da3dc6465.dir
      size: 1317233
      nfiles: 101
    - path: ClimaAtmos.jl/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: scripts/run-nsys.sh
      hash: md5
      md5: f83d8ec0a4bd8e2cd5513b64079b7b02
      size: 1546
    outs:
    - path: .calkit/slurm/logs/nsys-baseline-none.out
      hash: md5
      md5: 198aa68fec5549ef9e105c7e07fc8315
      size: 13961
    - path: results/nsys/baseline-none.nsys-rep
      hash: md5
      md5: 81f4276a83f6ab7956cb95bc1be91095
      size: 5010828
  nsys-baseline-none-to-sqlite:
    cmd: ' bash --noprofile --norc -c "nsys export results/nsys/baseline-none.nsys-rep
      -t sqlite -o results/nsys/baseline-none.sqlite"'
    deps:
    - path: results/nsys/baseline-none.nsys-rep
      hash: md5
      md5: 81f4276a83f6ab7956cb95bc1be91095
      size: 5010828
    outs:
    - path: results/nsys/baseline-none.sqlite
      hash: md5
      md5: cf6d599d2bcf92725ad8b73ad7159c25
      size: 9965568
  summarize:
    cmd: calkit xenv -n py --no-check -- python scripts/summarize.py
    deps:
    - path: .calkit/env-locks/py
      hash: md5
      md5: b11b4b2793ead33aa1d1a841df65bc83.dir
      size: 2037
      nfiles: 2
    - path: results/nsys
      hash: md5
      md5: 25d72dc6fc6708620bb84972446c3538.dir
      size: 45481942
      nfiles: 8
    - path: scripts/summarize.py
      hash: md5
      md5: 86e594fac13f0a04b7c45f18888f0fad
      size: 1027
    outs:
    - path: results/summary.csv
      hash: md5
      md5: 669956da213a0da535490ab806d6942a
      size: 285
  nsys-mod-const:
    cmd: calkit slurm batch --name nsys-mod-const --environment clima --dep 
      config/base.yml --dep config/const.yml --dep ClimaAtmos.jl-mod/src --dep 
      ClimaAtmos.jl-mod/toml --dep 
      ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml --dep 
      ClimaAtmos.jl/perf/benchmark_step.jl --out results/nsys/mod-const.nsys-rep
      -s --gpus=1 -s --time=60 -- scripts/run-nsys.sh results/nsys/mod-const 
      ClimaAtmos.jl-mod/.buildkite config/base.yml config/const.yml
    deps:
    - path: ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl-mod/src
      hash: md5
      md5: 08cc17f3a7d54f870af28527d940ceee.dir
      size: 1317242
      nfiles: 101
    - path: ClimaAtmos.jl-mod/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: ClimaAtmos.jl/perf/benchmark_step.jl
      hash: md5
      md5: e4e56e0353b6c5130c4e3fc03082c211
      size: 2082
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/const.yml
      hash: md5
      md5: 77bc7b925c754338d9602a945c8888ce
      size: 36
    - path: scripts/run-nsys.sh
      hash: md5
      md5: f83d8ec0a4bd8e2cd5513b64079b7b02
      size: 1546
    outs:
    - path: .calkit/slurm/logs/nsys-mod-const.out
      hash: md5
      md5: d5d305d9376c7072123eb62194232d72
      size: 14055
    - path: results/nsys/mod-const.nsys-rep
      hash: md5
      md5: 84480760691f07da0dfcf4c7ebd4962f
      size: 5095530
  nsys-mod-const-to-sqlite:
    cmd: ' bash --noprofile --norc -c "nsys export results/nsys/mod-const.nsys-rep
      -t sqlite -o results/nsys/mod-const.sqlite"'
    deps:
    - path: results/nsys/mod-const.nsys-rep
      hash: md5
      md5: 84480760691f07da0dfcf4c7ebd4962f
      size: 5095530
    outs:
    - path: results/nsys/mod-const.sqlite
      hash: md5
      md5: b350ced34092857500d97df7b04e4fd3
      size: 10149888
  run-baseline-const:
    cmd: calkit slurm batch --name run-baseline-const --environment clima --dep 
      scripts/run.jl --dep config/base.yml --dep config/const.yml --dep 
      ClimaAtmos.jl/src --dep ClimaAtmos.jl/toml --dep 
      ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml -s --gpus=1 -s --time=60 -- 
      scripts/run.sh ClimaAtmos.jl/.buildkite scripts/run.jl --job_id 
      baseline_const --config_file config/base.yml --config_file 
      config/const.yml
    deps:
    - path: ClimaAtmos.jl/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl/src
      hash: md5
      md5: 01e1d1b04e003a8a54f22f5da3dc6465.dir
      size: 1317233
      nfiles: 101
    - path: ClimaAtmos.jl/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/const.yml
      hash: md5
      md5: 77bc7b925c754338d9602a945c8888ce
      size: 36
    - path: scripts/run.jl
      hash: md5
      md5: c812073d3c855294204c691ab6b9bb6e
      size: 1980
    - path: scripts/run.sh
      hash: md5
      md5: 55b895adbb65f6511b237e4d2cde9f25
      size: 1014
    outs:
    - path: .calkit/slurm/logs/run-baseline-const.out
      hash: md5
      md5: 35764f02f0bc2fae9be86a9c24785264
      size: 17130
  run-mod-const:
    cmd: calkit slurm batch --name run-mod-const --environment clima --dep 
      scripts/run.jl --dep config/base.yml --dep config/const.yml --dep 
      ClimaAtmos.jl-mod/src --dep ClimaAtmos.jl-mod/toml --dep 
      ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml -s --gpus=1 -s --time=60 
      -- scripts/run.sh ClimaAtmos.jl-mod/.buildkite scripts/run.jl --job_id 
      mod_const --config_file config/base.yml --config_file config/const.yml
    deps:
    - path: ClimaAtmos.jl-mod/.buildkite/Manifest-v1.11.toml
      hash: md5
      md5: 960b94f8e8dc62e1ef00310b21171099
      size: 106103
    - path: ClimaAtmos.jl-mod/src
      hash: md5
      md5: 08cc17f3a7d54f870af28527d940ceee.dir
      size: 1317242
      nfiles: 101
    - path: ClimaAtmos.jl-mod/toml
      hash: md5
      md5: f6943f469c23e41ed04469503e7b9563.dir
      size: 11921
      nfiles: 36
    - path: config/base.yml
      hash: md5
      md5: 4756cdb867a59bff0c1f2cb99084db18
      size: 3659
    - path: config/const.yml
      hash: md5
      md5: 77bc7b925c754338d9602a945c8888ce
      size: 36
    - path: scripts/run.jl
      hash: md5
      md5: c812073d3c855294204c691ab6b9bb6e
      size: 1980
    - path: scripts/run.sh
      hash: md5
      md5: 55b895adbb65f6511b237e4d2cde9f25
      size: 1014
    outs:
    - path: .calkit/slurm/logs/run-mod-const.out
      hash: md5
      md5: dbd2ef871c03dccc431909086b9c6a2c
      size: 17134
